\withOptions moreSeqRules:on;

\javaSource "../../src";

\chooseContract "de.wiesler.Sorter[de.wiesler.Sorter::sample([I,int,int,de.wiesler.Storage)].JML normal_behavior operation contract.0";

\proofScript "

macro autopilot-prep;

select succedent formula='
    {heapAtPre:=heap || exc:=null || heap:=heapAfter_sort || result:=result_0}
        seqPerm(
            seqDef{int u;}(0, values.length, any::select(heap, values, arr(u))),
            seqDef{int u;}(0, values.length, any::select(heapAtPre, values, arr(u)))
        )';

rule seqPermTrans formula='
    seqPerm(
        seqDef{int u;}(0, values.length, any::select(heapAfter_sort, values, arr(u))),
        seqDef{int u;}(0, values.length, any::select(heapAfter_select_n, values, arr(u)))
    )';

tryclose;

"